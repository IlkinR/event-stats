# Events

## Гайд по запуску проекта

1. Собираем проект
    ```bash
    sudo docker-compose build
    ```

2. Запускаем миграции для создания таблиц в базе данных
    ```bash
    sudo docker-compose exec web python manage.py migrate
    ```

3. Запускаем проект
    ```bash
    sudo docker-compose up
    ```

## Методы, доступные в проекте

### Получение статистики

```GET /api/stats/get_event_stats/``` показывает статистику за определенный период времени

Параметры

* ```from``` - дата начала периода (включительно)
* ```to``` - дата окончания периода (включительно)
* ```sortway``` - поле, по которому будет сортированы данные. Может принимать значения views (количество показов),
  clicks (количество показов) и click_cost (средняя стоимость клика)

Пример ответа

```json
[
  {
    "date_recorded": "2021-12-13",
    "views": 31273,
    "clicks": 312313123,
    "click_cost": 13,
    "cpc": 0.0,
    "cpm": 0.42
  },
  {
    "date_recorded": "2021-12-14",
    "views": 31273,
    "clicks": 312313123,
    "click_cost": 13,
    "cpc": 0.0,
    "cpm": 0.42
  }
]
```

### Получение статистики

```POST /api/stats/create_event_stats/``` сохряняет статистику за определенный период времени

Пример запроса:

```json
{
  "date_recorded": "2021-12-14",
  "views": 31273,
  "clicks": 312313123,
  "click_cost": 13
}
```

Если был возврашен сам объект, то значит все прошло успешно

### Сохранение статистики

```POST /api/stats/create_event_stats/``` сохряняет статистику за определенный период времени

Пример запроса:

```json
{
  "date_recorded": "2021-12-14",
  "views": 31273,
  "clicks": 312313123,
  "click_cost": 13
}
```

Если был возврашен сам объект, то значит все прошло успешно

### Метод сброса статистики

```DELETE /api/stats/delete_events/``` Удаляет всю сохраненную статистику.

Если все прошло гладко, метод вернет сообщение об удачном удалении записей